local RS = game:GetService("ReplicatedStorage")
local Services = RS:WaitForChild("MyServices"):WaitForChild("Services")
local CharacterStats = require(Services:WaitForChild("CharacterStats"))

local ServerScriptService = game:GetService("ServerScriptService")
local Players = game:GetService("Players")
local GameSession = require(ServerScriptService.GameSession)

Players.PlayerAdded:Connect(function(player)
	CharacterStats.InitPlayer(player)
end)

--for _, player in ipairs(Players:GetPlayers()) do
--	CharacterStats.InitPlayer(player)
--end

-- Settings
local MAP = "Forest"
local DIFF = 1.0
local ENDLESS = true
local playerCount = 1

repeat task.wait(1) until #Players:GetPlayers() >= playerCount
print("Players found. Starting game in 1 seconds...")
task.wait(1)

playerCount = #Players:GetPlayers()

if not workspace:FindFirstChild("Drops") then
	local folder = Instance.new("Folder")
	folder.Name = "Drops"
	folder.Parent = workspace
end

GameSession.Start(MAP, DIFF, playerCount, ENDLESS)
